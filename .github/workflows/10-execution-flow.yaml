name: 10 - Controlling the Execution Flow
on: 
  workflow_dispatch:
    inputs:
      pass-unit-tests:
        type: boolean
        default: false
jobs:
  lint-build: 
    runs-on: ubuntu-latest
    steps:
      - name: lint- build
        run: echo "Linting and building project"
  unit-tests: 
    runs-on: ubuntu-latest
    if: ${{ inputs.pass-unit-tests == false }}
    steps:
      - name: Running unit tests
        run: |
          echo "running tests"
          exit 1
  deploy-nonprod:
    runs-on: ubuntu-latest
    needs: 
      - lint-build
      - unit-tests
    steps: 
      - name: Deploying to nonprod 
        run: echo "Deploying to non prod..."
  e2e-tests:
    needs: deploy-nonprod
    runs-on: ubuntu-latest
    steps:
      - name: Running E2E tests
        run: "Running E2E tests"
  load-tests:
    needs: deploy-nonprod
    runs-on: ubuntu-latest
    steps:
      - name: Running load-tests
        run: echo "Running load-tests"
  deploy-prod: 
    needs:
      - e2e-tests
      - load-tests 
    runs-on: ubuntu-latest
    steps: 
      - name: Deploying to prod 
        run: "Deploying to prod ...."
